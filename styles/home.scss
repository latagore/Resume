@import url("https://fonts.googleapis.com/css?family=Assistant:300,600|Merriweather+Sans:400");
@import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css");

$sidebar-width: 25%;

@function getMediaQuery($size, $print) {
  @return "(min-width: #{$size})" + if($print, ", print", "");
}

@mixin breakpoint($class, $print: false) {
  @if $class == xs {
    @media #{getMediaQuery(0, $print)} { @content; }
  }

  @else if $class == sm {
    @media #{getMediaQuery(768px, $print)} { @content; }
  }

  @else if $class == md {
    @media #{getMediaQuery(992px, $print)} { @content; }
  }

  @else if $class == lg {
    @media #{getMediaQuery(1200px, $print)} { @content; }
  }

  @else {
    @error "Breakpoint mixin supports: xs, sm, md, lg";
  }
}

*, *:before, *:after {
  box-sizing: border-box;
}

body {
  font-family: Assistant, Sans-Serif;

  & > * {
    max-width: 1024px;
    margin: 0 auto;
    padding: 1rem 1rem 10rem 1rem;
    @media print {
      padding: 0;
    }
  }

  @media print {
    font-size: 90%;
  }
}

main {
  @include breakpoint(sm, true) {
    column-count: 2;
  }
}

h1 {
  font-family: "Merriweather Sans", Sans-Serif;
  font-weight: 400;
}

h2 {
  font-size: 140%;
  font-weight: bold;
  margin-top: 1rem;
  margin-bottom: 0.3rem;
}

h3 {
  font-size: 100%;
  font-weight: bold;
  margin: 0;
}

section {
  break-inside: avoid-column;

  // remove top-margin of first heading to line up columns
  &:first-child > h2:first-child {
    margin: 0;
  }
}

ul {
  margin: 0.5em;
  padding-left: 1em;
}

sup, sub {
  vertical-align: baseline;
  position: relative;
  top: -0.4em;
}
sub {
  top: 0.4em;
}


header {
  h1, h2 {
    @include breakpoint(md) {
      position: relative;
      left: $sidebar-width;
      width: 75%;
    }
    @media print {
      margin-top: 0;
    }
  }
  h1 {
    margin-bottom: 0;
    text-align: center;
  }

  .job-title {
    margin-top: -0.25rem;
    margin-bottom: 0.25rem;
    padding: 0;
    text-align: center;

  }

}

.aside {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;

  text-align: center;
  padding: 0 2em;
  margin-bottom: 1rem;

  @include breakpoint(md) {
    float: left;
    width: $sidebar-width;
    text-align: left;

    padding: 0 1.5rem 0 0;

    & > * {
      width: 100%;
    }
  }

  .summary {
    margin-top: 0.5rem;
    margin-bottom: 0;
    @include breakpoint(md) {
      order: -1;
      margin-bottom: 1rem;
    }
  }


  .contact {
    & > * {
      display: inline-block;
      padding: 0 0.5em;

      @include breakpoint(md) {
        display: block;
        padding: 0;
      }
    }

    .email::before {
      content: '\f0e0';
      font-family: FontAwesome;
      display: inline-block;
      padding-right: 0.3em;
    }
    .phone::before {
      content: '\f095';
      font-family: FontAwesome;
      display: inline-block;
      padding-right: 0.3em;
    }
    .address::before {
      content: '\f015';
      font-family: FontAwesome;
      display: inline-block;
      padding-right: 0.3em;
    }
    .github::before {
      content: '\f09b';
      font-family: FontAwesome;
      display: inline-block;
      padding-right: 0.3em;
    }
    .website::before {
      content: '\f0ac';
      font-family: FontAwesome;
      display: inline-block;
      padding-right: 0.3em;
    }
    .linkedin::before {
      content: '\f0e1';
      font-family: FontAwesome;
      display: inline-block;
      text-align: center;
      padding-right: 0.3em;
    }
  }
}

.info-block {
  break-inside: avoid-column;
  margin-bottom: 0.5rem;
  &:last-child {
    margin-bottom: 0;
  }
}

.achievements {
  ul {
    margin-top: 0;
    margin-bottom: 0;
  }
  li {
    h3 {
      display: inline;
      &::after {
        content: "\2014";
        display: inline-block;
        padding-left: 0.2em;
        padding-right: 0.2em;
      }
    }
    p {
      display: inline;
    }
  }
}


$bar-width: 0.7;
$bar-color: rgba(63, 127, 191, 0.8);
.skill-graph {
  position: relative;
  .labels {
    position: relative;
    z-index: 1;
    height: 2em; /* prevent labels from wrapping to next column */
    font-size: 70%;
    @for $i from 1 to 10 {
      .label-#{$i} {
        left: $bar-width * percentage(($i) / 10);
        border-left: 1px solid #CCC;
        padding-top: 1em;
        padding-left: 0.25em;
        line-height: 1;
        position: absolute;
      }
    }
  }
  .bars {
    /* create 10 grid lines and hide the rest*/
    $epsilon: 0.01;
    background-image: linear-gradient(
      to right,
      transparent,
      /* add epsilon to include the last line */
      transparent percentage($bar-width + $epsilon),
      white percentage($bar-width + $epsilon),
      white
    ), repeating-linear-gradient(
      to right,
      #CCC,
      #CCC 1px,
      #FFF 1px,
      #FFF #{$bar-width * 10%}
    );

    font-size: 90%;
    .subskills {
      font-size: 80%;
    }

    .bar {
      margin: 0.3em 0;
    }

    @for $i from 1 through 10 {
      $offset: percentage($i * $bar-width / 10);
      $width: percentage(1 - ($i * $bar-width / 10));

      & .bar-#{$i}  {

        background: linear-gradient(to right, $bar-color, $bar-color $offset,  transparent $offset,  transparent);
        > .bar-content {
          left: $offset;
          position: relative;
          padding: 0 0.3rem;
          width: $width;
        }
      }
    }
  }
}
